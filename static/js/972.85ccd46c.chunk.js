"use strict";(self.webpackChunktahos_lat=self.webpackChunktahos_lat||[]).push([[972],{39412:function(e,n,t){t.d(n,{A:function(){return c}});var i=t(9950),a=t(41397),r="InfoFields_fieldContainer__T-mr8",o="InfoFields_title__kg-LW",l="InfoFields_text__rIG7K",s=t(44414),d=function(e){var n=e.fieldData,t=e.noWrapper,d=function(){return null===n||void 0===n?void 0:n.map(function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.title,d=void 0===t?"":t,c=n.text,u=arguments.length>1?arguments[1]:void 0;return(0,s.jsxs)("div",{className:r,children:[(0,s.jsx)("div",{className:o,children:"".concat(d,":")}),(0,s.jsx)("div",{className:l,children:(e=c,(0,i.isValidElement)(e)||Array.isArray(e)&&(null===e||void 0===e?void 0:e.every(i.isValidElement))||!(0,a.isPlainObject)(e)&&!Array.isArray(e)&&e?e:"-")})]},"field_".concat(u+1))})};return t?d():(0,s.jsx)("div",{className:"descriptionGrid",children:d()})},c=(0,i.memo)(d)},41467:function(e,n,t){t.d(n,{A:function(){return W}});var i=t(9950),a=t(54408),r="UploadDocuments_fileContainer__gF26V",o="UploadDocuments_wrapper__hFMDz",l="UploadDocuments_titleWrapper__mI0b9",s="UploadDocuments_text__tozOz",d="UploadDocuments_text2__YWBZY",c=t(91212),u=t(10467),m=t(60436),v=t(10300),f=t(45131),p=t(41397),h=t.n(p),_=t(83137),x=t(83325),A=t(12505),j=t(44414),g=(0,a.Ay)(function(e){var n=e.attachmentId,t=e.files,a=e.setFiles,r=e.maxSize,o=e.maxFiles,l=e.pattern,s=e.acceptPattern,d=e.attachment,p=e.handleClose,g=e.fullWidth,y=e.intl.formatMessage,b=(0,v.wA)(),C=function(e){return b(f.Lm(e))},F=(0,i.useRef)(null),N=function(){var e=(0,u.A)((0,c.A)().m(function e(t){var i,a,o;return(0,c.A)().w(function(e){for(;;)switch(e.n){case 0:if(i={1:function(){return(0,_.Nw)(t,r)},2:function(){return(0,_.$m)(t,r)},3:function(){return(0,_.Te)(t,r)}},!t.type.match(l)){e.n=2;break}return e.n=1,null===(a=i[n])||void 0===a?void 0:a.call(i);case 1:return o=e.v,e.a(2,o||C({messageId:"file.forbbiden.size",color:"error"}));case 2:C({messageId:"file.forbbiden.format",color:"error"});case 3:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),I=function(){var e;return null===F||void 0===F||null===(e=F.current)||void 0===e?void 0:e.click()};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("input",{style:{display:"none"},accept:s,multiple:!!(o>1),onChange:function(e){if((null===t||void 0===t?void 0:t.length)<o){var i=e.target.files;(0,m.A)(i).forEach(function(){var e=(0,u.A)((0,c.A)().m(function e(t,r){var l;return(0,c.A)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,N(t);case 1:if(l=e.v,!h().isBoolean(l)||!l){e.n=2;break}return e.n=2,(0,_.bB)(t).then(function(e){var r={attachment_type_id:n,src:e,name:null===t||void 0===t?void 0:t.name,size:null===t||void 0===t?void 0:t.size};(null===i||void 0===i?void 0:i.length)<o+1&&(a(function(e){return[].concat((0,m.A)(e),[r])}),d&&(null===p||void 0===p||p()))});case 2:return e.a(2)}},e)}));return function(n,t){return e.apply(this,arguments)}}())}e.target.value=""},type:"file",id:"files",name:"files",ref:F}),d?d(I):(0,j.jsxs)(x.A,{onClick:I,buttonType:"reset",fullWidth:!!g,children:[(0,j.jsx)("span",{className:"me-2",children:(0,j.jsx)(A.A,{})}),(0,j.jsx)("span",{children:y({id:"button.upload"})})]})]})}),y="CustomUploadedFile_container__p88LB",b=t(89379),C=t(83274),F=t(66699),N="CustomRectangleItem_container__mnL0r",I="CustomRectangleItem_leftContainer__47GGI",D="CustomRectangleItem_fileNameContainer__QJ26g",M="CustomRectangleItem_fileName__XM1CK",w="CustomRectangleItem_name__0wKNI",k="CustomRectangleItem_rightContainer__-ez-b",P=t(5731),S=t(13633),z=(0,i.memo)((0,a.Ay)(function(e){var n,t=e.item,i=e.TitleIcon,a=e.maxSize,r=e.renderRemoveIcon,o=e.intl.formatMessage,l=(0,S.P)().CustomLinearProgress;return(0,j.jsxs)("div",{className:N,children:[(0,j.jsxs)("div",{className:I,children:[(0,j.jsx)("div",{children:(0,j.jsx)(i,{stroke:P.a5,className:"icon_24"})}),(0,j.jsxs)("div",{className:D,children:[(0,j.jsx)(C.A,{title:null===t||void 0===t?void 0:t.name,arrow:!0,children:(0,j.jsxs)("div",{className:M,children:[(0,j.jsx)("div",{className:w,children:null===t||void 0===t?void 0:t.name}),!(null!==t&&void 0!==t&&t.id)&&(0,j.jsx)("div",{children:"".concat(a,"MB")})]})}),!(null!==t&&void 0!==t&&t.id)&&(0,j.jsx)(C.A,{title:"".concat((0,_.ZV)((null===t||void 0===t?void 0:t.size)/1048576,2),"MB"),arrow:!0,children:(0,j.jsx)(F.A,{variant:"determinate",value:(n=null===t||void 0===t?void 0:t.size,Math.round(n/(1048576*a)*100)),sx:l})})]})]}),(0,j.jsx)("div",{className:k,children:[{name:"remove",title:o({id:"button.remove"}),renderCondition:r,property:t}].flatMap(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.renderCondition,t=e.name,i=e.title,a=e.property,r=e.Component,o=void 0===r?C.A:r,l=arguments.length>1?arguments[1]:void 0;return n?(0,j.jsx)(o,(0,b.A)((0,b.A)({},i?{title:i,arrow:!0}:{}),{},{children:null===n||void 0===n?void 0:n(a)}),"".concat(t,"_").concat(l)):[]})})]})})),L=t(78264),q=function(e){var n=e.files,t=e.setFiles,a=e.maxSize,r=e.Icon,o=function(e){return(0,j.jsx)("div",{onClick:function(){return function(e){var i=null===n||void 0===n?void 0:n.filter(function(n){return(null===n||void 0===n?void 0:n.src)!==(null===e||void 0===e?void 0:e.src)});t(i)}(e)},children:(0,j.jsx)(L.A,{fontSize:"large",className:"iconHover"})})};return(0,j.jsx)("div",{className:y,children:null===n||void 0===n?void 0:n.map(function(e,n){return(0,j.jsx)(i.Fragment,{children:(0,j.jsx)(z,{item:e,index:n,TitleIcon:r,maxSize:a,renderRemoveIcon:o})},"".concat(null===e||void 0===e?void 0:e.name).concat(n+1))})})},T=(0,i.memo)(q),W=(0,i.memo)((0,a.Ay)(function(e){var n=e.data,t=e.noFormats,a=e.intl.formatMessage,c=(0,i.useMemo)(function(){return n||{}},[n]),u=c.attachmentId,m=c.Icon,v=c.text,f=c.files,p=c.setFiles,h=c.maxSize,_=c.maxFiles,x=c.pattern,A=c.acceptPattern,y=c.validDocs;return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{className:r,children:[(0,j.jsxs)("div",{className:o,children:[(0,j.jsxs)("div",{className:l,children:[!!m&&(0,j.jsx)("div",{children:(0,j.jsx)(m,{fontSize:"large"})}),(0,j.jsx)("div",{children:v||a({id:"file.add"})})]}),(0,j.jsx)("div",{children:(0,j.jsx)(g,{attachmentId:u,files:f,setFiles:p,maxSize:h,maxFiles:_,pattern:x,acceptPattern:A})}),!t&&(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{className:s,children:a({id:"file.format"})}),(0,j.jsx)("div",{className:d,children:y||"PDF, PNG, JPEG, JPG, XLSX, XLS, DOCX."})]})]}),!(null===f||void 0===f||!f.length)&&(0,j.jsx)(T,{files:f,setFiles:p,maxSize:h,Icon:m})]})})}))},49395:function(e,n,t){t.d(n,{A:function(){return F}});var i=t(89379),a=t(80045),r=t(5544),o=t(9950),l=t(10300),s=t(54408),d={title:"CustomDocumentList_title__6qro-",container:"CustomDocumentList_container__diJXW",documentWrapper:"CustomDocumentList_documentWrapper__RQnbX",name:"CustomDocumentList_name__b+PC9",details:"CustomDocumentList_details__Q-6n9",date:"CustomDocumentList_date__v6a-f",button:"CustomDocumentList_button__1aK6S",disabled:"CustomDocumentList_disabled__SY+UT"},c=t(83137),u=t(95250),m=t(82109),v=t(67078),f=t(27406),p=t(41612),h=t(55562),_=t(40553),x=t(59001),A=t(47051),j=t(82544),g=t(22609),y=t(44414),b=["id","type"],C=["id","type","name","date_created","url","status"],F=(0,o.memo)((0,s.Ay)(function(e){var n=e.customData,t=e.customQuery,o=e.intl.formatMessage,s=(0,l.d4)(function(e){return e.app}).themeColors,F=(0,m.w)({roleNames:["superadmin","admin","podadmin"]}),N=(0,r.A)(F,1)[0],I=(0,u.X)({url:!n&&t&&"/reports/list.php?delay=1".concat(t)}),D=I.data,M=I.loading,w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.id,t=e.type,i=(0,a.A)(e,b),r=[{name:"client",Icon:A.A},{name:"vehicle",Icon:j.A},{name:"driver",Icon:g.A}];return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"mb-2",children:(0,y.jsx)(v.A,{large:!0,data:{id:n,name:t}})}),null===r||void 0===r?void 0:r.flatMap(function(e,n){var t=e.name,a=e.Icon;return null!==i&&void 0!==i&&i[t]?(0,y.jsxs)("div",{className:d.name,style:{color:s["--text-color"]},children:[(0,y.jsx)("div",{children:(0,y.jsx)(a,{className:"icon_24"})}),null===i||void 0===i?void 0:i[t]]},"".concat(t,"_").concat(n+1)):[]})]})},k=function(){var e;return null===(e=(0,c.di)(n||D))||void 0===e?void 0:e.map(function(e,t){var r=e.id,l=e.type,s=e.name,u=e.date_created,m=e.url,v=e.status,f=(0,a.A)(e,C),p=n?!(null!==v&&void 0!==v&&v.value):!+v;return(0,y.jsxs)("div",{className:[d.documentWrapper,p?d.disabled:""].join(" "),children:[!!N&&w((0,i.A)({id:r,type:l},f)),(0,y.jsxs)("div",{className:d.name,children:[(0,y.jsx)("div",{children:(0,y.jsx)(h.A,{className:"icon_24"})}),s]}),(0,y.jsxs)("div",{className:d.details,children:[(0,y.jsxs)("div",{className:d.date,children:[(0,y.jsx)("div",{children:(0,y.jsx)(_.A,{className:"icon_24"})}),(0,c.Yq)(u,"dateOnly")]}),(0,y.jsxs)("div",{className:d.button,onClick:function(){return(0,c.zc)(m,s)},children:[(0,y.jsx)("div",{children:(0,y.jsx)(x.A,{className:"icon_24"})}),(0,y.jsx)("div",{children:o({id:"button.download"})})]})]})]},"".concat(r,"_").concat(s,"_").concat(u,"_").concat(t))})};return n?k():(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{className:d.title,children:o({id:"file.list"})}),(0,y.jsxs)("div",{className:d.container,children:[M&&!(null!==D&&void 0!==D&&D.length)&&(0,y.jsx)(f.A,{type:"default",singleColumn:!0}),!M&&!(null===D||void 0===D||!D.length)&&k(),!M&&!(null!==D&&void 0!==D&&D.length)&&(0,y.jsx)(p.A,{})]})]})}))},70298:function(e,n,t){var i=t(89379),a=t(9950),r=t(54408),o=t(10300),l=t(17419),s=t(83325),d=t(44414);n.A=(0,a.memo)((0,r.Ay)(function(e){var n=e.open,t=e.title,r=e.message,c=e.confirmationHandler,u=e.handleClose,m=e.maxWidth,v=e.confirmOnly,f=e.confirmDisabled,p=e.confirmButtonType,h=e.intl.formatMessage,_=(0,o.d4)(function(e){return e.login}).spinner,x=(0,a.useMemo)(function(){return["xs","sm"].includes(m)},[m]),A=(0,a.useMemo)(function(){return x?{fullWidth:!0}:{}},[x]);return(0,d.jsx)(l.A,{open:n,maxWidth:m||"sm",handleClose:u,title:t,message:r,footer:(0,d.jsxs)(d.Fragment,{children:[!v&&(0,d.jsx)(s.A,(0,i.A)((0,i.A)({buttonType:"reset",onClick:u,disabled:_},A),{},{children:h({id:"button.cancel"})})),(0,d.jsx)(s.A,(0,i.A)((0,i.A)({buttonType:p||"primary",onClick:function(){return!f&&c()},loadingButton:!0,loading:_,disabled:f},A),{},{children:h({id:v||"button.confirm"})}))]})})}))},70742:function(e,n,t){var i=t(89379),a=t(80045),r=t(9950),o=t(54408),l=t(83325),s=t(44414),d=["text"];n.A=(0,r.memo)((0,o.Ay)(function(e){var n=e.handleSubmit,t=e.rejectAction,r=e.spinner,o=e.intl.formatMessage;return function(){var e=[{text:"button.cancel",buttonType:"reset",onClick:t,disabled:r},{text:"button.save",buttonType:"primary",onClick:n,loading:r,loadingButton:!0}];return null===e||void 0===e?void 0:e.flatMap(function(e,n){var t=e.text,r=(0,a.A)(e,d);return null!==r&&void 0!==r&&r.onClick?(0,s.jsx)(l.A,(0,i.A)((0,i.A)({},r),{},{children:o({id:t})}),"".concat(t,"_").concat(n)):[]})}()}))},85546:function(e,n,t){t.d(n,{w:function(){return i}});var i=function(e,n,t){return{required:"".concat(e({id:"required.field.1"})," ").concat(n.toLowerCase()," ").concat(e({id:"required.field.2"}),"."),filter:"".concat(e({id:"filter.choose.1"})," ").concat(n.toLowerCase()," ").concat(e({id:"filter.choose.2"})),date:"".concat(e({id:"required.field.1"})," ").concat(n.toLowerCase()," ").concat(e({id:"required.field.2"}),"."),password:"".concat(e({id:"required.field.1"})," ").concat(n.toLowerCase()," ").concat(e({id:"password.minimum.characters"})),length:"".concat(e({id:"required.upload.field"}))}[t]}},86878:function(e,n,t){t.d(n,{n:function(){return l}});var i=t(60436),a=t(91283),r=t(24003),o=t(973),l=function(e){var n=e.formatMessage,t=e.imageFiles,l=e.setImageFiles,s=e.videoFiles,d=e.setVideoFiles,c=e.documentFiles,u=e.setDocumentFiles;return[].concat((0,i.A)(l?[{attachmentId:1,Icon:a.A,text:n({id:"upload.image"}),files:t,setFiles:l,maxSize:2,maxFiles:1,pattern:/^image\/(png|jpeg|jpg)/,acceptPattern:".png, .jpeg, .jpg",validDocs:"PNG, JPEG, JPG"}]:[]),(0,i.A)(d?[{attachmentId:2,Icon:r.A,text:n({id:"upload.video"}),files:s,setFiles:d,maxSize:5,maxFiles:1,pattern:/^video\/(mp4|avi)/,acceptPattern:".mp4, .avi",validDocs:"MP4, AVI"}]:[]),(0,i.A)(u?[{attachmentId:3,Icon:o.A,text:n({id:"upload.document"}),files:c,setFiles:u,maxSize:3,maxFiles:1,pattern:/^application\/(pdf)/,acceptPattern:".pdf",validDocs:"PDF"}]:[]))}},88142:function(e,n,t){t.d(n,{B:function(){return N}});var i=t(91212),a=t(80045),r=t(64467),o=t(10467),l=t(5544),s=t(89379),d=t(9950),c=t(10300),u=t(29714),m=t(45131),v=t(93320),f=t(85546),p=t(73275),h=t(95250),_=t(82109),x=t(83137),A=t(70742),j=t(41467),g=t(86878),y=t(44414),b=["url","postData"],C=function(e){var n=e.defaultType,t=e.hasPermission;return(0,s.A)({date_created:null,file_name:"",documentFiles:[]},!n&&t&&{type:null})},F=function(e){var n=e.defaultType,t=e.hasPermission,i=e.fieldLabels,a=e.formatMessage;return(0,u.Ik)().shape((0,s.A)({date_created:(0,u.p6)().required((0,f.w)(a,i.date_created,"date")),file_name:(0,u.Yj)().required((0,f.w)(a,i.file_name,"required")),documentFiles:(0,u.YO)().min(1,(0,f.w)(a,i.document,"length")).required((0,f.w)(a,i.document,"required"))},!n&&t&&{type:(0,u.Ik)().required((0,f.w)(a,i.file_type,"filter"))}))},N=function(e){var n,t=e.modal,u=e.handleClose,f=e.dataName,N=e.editDataID,I=e.clientId,D=e.formatMessage,M=(0,c.d4)(function(e){return e.login}).spinner,w=(0,c.wA)(),k=function(e){return w(m.yK(e))},P=function(e){return w(m.Lm(e))},S=(0,d.useMemo)(function(){return["id_client"===f]},[f]),z=(0,l.A)(S,1)[0],L=(0,_.w)({roleNames:["superadmin","admin","podadmin"]}),q=(0,l.A)(L,1)[0],T=(0,h.X)({url:z&&t&&"/report_types/list.php?status=1",customDataHandler:function(e){return null===e||void 0===e?void 0:e.find(function(e){return 3===e.id})},keepQuery:!0}),W=T.data,R=T.loading,B=(0,d.useState)([]),G=(0,l.A)(B,2),X=G[0],V=G[1];(0,d.useEffect)(function(){var e;t&&($("documentFiles",X),$("file_name",(null===X||void 0===X||null===(e=X[0])||void 0===e?void 0:e.name)||""))},[X]);var E=function(){V([]),null===Y||void 0===Y||Y.handleReset(),u()},O=(0,d.useMemo)(function(){return{date_created:D({id:"file.date"}),file_type:D({id:"file.type"}),file_name:D({id:"file.document.name"}),document:D({id:"file.add"})}},[D]),U=function(){var e=(0,o.A)((0,i.A)().m(function e(n){var t,o,l,d,c,u,m,p,h,_,A,j,g,y,C;return(0,i.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(k(!0),d=(l=n||{}).type,c=l.date_created,u=l.file_name,m={url:"/reports/upload.php",postData:(0,s.A)((0,s.A)((0,s.A)((0,r.A)({},f,N),z&&{type:null===W||void 0===W?void 0:W.id}),!z&&(0,s.A)({type:q?null===d||void 0===d?void 0:d.id:1},q&&{id_client:I})),{},{date_created:(0,x.uv)(c),file_name:u,pdf_file:null===n||void 0===n||null===(t=n.documentFiles)||void 0===t||null===(o=t[0])||void 0===o?void 0:o.src}),headerType:"multipart"},h=(p=m||{}).url,A=void 0===(_=p.postData)?null:_,j=(0,a.A)(p,b),!h){e.n=6;break}return e.p=1,e.n=2,(0,v.c)((0,s.A)({method:"POST",query:h,data:A},j));case 2:g=e.v,y=g.data,E(),P({serverMessage:null===y||void 0===y?void 0:y.message}),e.n=4;break;case 3:e.p=3,C=e.v,P({serverMessage:(0,x.b6)(C),color:"error"});case 4:return e.p=4,k(!1),e.f(4);case 5:e.n=7;break;case 6:k(!1);case 7:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(n){return e.apply(this,arguments)}}(),J=(0,p.P)({initialValues:C({defaultType:z,hasPermission:q}),validationSchema:F({defaultType:z,hasPermission:q,fieldLabels:O,formatMessage:D}),onSubmit:U,keyName:"upload_reports"}),Y=J.formik,K=J.renderMultipleInputs,Q=J.renderMultipleFilters,H=J.renderMultipleDates,Z=J.renderErrors,$=J.setFieldValue,ee=(0,d.useMemo)(function(){return[{name:"file_name",required:!0,label:O.file_name}]},[O]),ne=(0,d.useMemo)(function(){return[(0,s.A)({required:!0,label:O.file_type},z?{disabled:!0,value:W,loading:R}:{name:"type",refresh:!0,url:"report_types/list.php?status=1"})]},[z,W,R,O]),te=(0,d.useMemo)(function(){return[{name:"date_created",required:!0,label:O.date_created}]},[O]);return!!t&&{title:D({id:"input.add.report"}),message:(0,y.jsxs)("div",{className:"mt-2",children:[!!q&&Q(ne),H(te),!(null===X||void 0===X||!X.length)&&K(ee),(0,y.jsx)(j.A,{data:null===(n=(0,g.n)({documentFiles:X,setDocumentFiles:V,formatMessage:D}))||void 0===n?void 0:n[0]}),Z({required:!0,name:"documentFiles"})]}),footer:(0,y.jsx)(A.A,{handleSubmit:null===Y||void 0===Y?void 0:Y.handleSubmit,rejectAction:E,spinner:M}),handleClose:E}}}}]);
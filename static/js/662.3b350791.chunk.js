"use strict";(self.webpackChunktahos_lat=self.webpackChunktahos_lat||[]).push([[662],{14622:function(e,i,a){var r=a(23235),n=a(44414);i.A=(0,r.A)((0,n.jsx)("path",{d:"M10.01 21.01c0 1.1.89 1.99 1.99 1.99s1.99-.89 1.99-1.99zM12 6c2.76 0 5 2.24 5 5v7H7v-7c0-2.76 2.24-5 5-5m0-4.5c-.83 0-1.5.67-1.5 1.5v1.17C7.36 4.85 5 7.65 5 11v6l-2 2v1h18v-1l-2-2v-6c0-3.35-2.36-6.15-5.5-6.83V3c0-.83-.67-1.5-1.5-1.5M11 8h2v4h-2zm0 6h2v2h-2z"}),"NotificationImportantOutlined")},59001:function(e,i,a){var r=a(23235),n=a(44414);i.A=(0,r.A)((0,n.jsx)("path",{d:"M18.32 4.26C16.84 3.05 15.01 2.25 13 2.05v2.02c1.46.18 2.79.76 3.9 1.62zM19.93 11h2.02c-.2-2.01-1-3.84-2.21-5.32L18.31 7.1c.86 1.11 1.44 2.44 1.62 3.9m-1.62 5.9 1.43 1.43c1.21-1.48 2.01-3.32 2.21-5.32h-2.02c-.18 1.45-.76 2.78-1.62 3.89M13 19.93v2.02c2.01-.2 3.84-1 5.32-2.21l-1.43-1.43c-1.1.86-2.43 1.44-3.89 1.62m2.59-9.34L13 13.17V7h-2v6.17l-2.59-2.59L7 12l5 5 5-5zM11 19.93v2.02c-5.05-.5-9-4.76-9-9.95s3.95-9.45 9-9.95v2.02C7.05 4.56 4 7.92 4 12s3.05 7.44 7 7.93"}),"DownloadingOutlined")},79850:function(e,i,a){a.r(i);var r=a(89379),n=a(80045),t=a(5544),d=a(9950),l=a(54408),o=a(10300),c=a(45131),s=a(95250),v=a(82109),u=a(4297),h=a(83137),m=a(49389),p=a(65510),_=a(85167),f=a(44414),w=["urlQuery"];i.default=(0,d.memo)((0,l.Ay)(function(e){var i=e.clientId,a=e.clientIdQuery,l=void 0===a?"":a,A=e.helmet,g=e.intl.formatMessage,x=(0,o.d4)(function(e){return e.dataTable}),y=x.search_query,j=x.local_query,C=(0,o.wA)(),N=(0,v.w)({roleNames:["superadmin","admin","podadmin"]}),b=(0,t.A)(N,1)[0],M=(0,s.X)({url:"/priority/list.php",keepQuery:!0}),z=M.data,k=M.loading,P=(0,u.c)({clientId:i,clientIdQuery:l,noStatus:!0,formatMessage:g}),W=P.urlQuery,H=(0,n.A)(P,w),I=(0,s.X)({url:"/alarms/list.php?delay=1".concat(W),hasRefetch:!0,keepQuery:!0,customSuccessCallback:function(e){return!y&&(i=null===e||void 0===e?void 0:e.length,C(c.XA(i)));var i}}),O=I.data,S=I.loading,V=(0,d.useMemo)(function(){return null===O||void 0===O?void 0:O.map(function(e,i){return(0,r.A)((0,r.A)({},e),{},{orderId:i+1,priority:(0,h.fb)({arrayData:z,value:null===e||void 0===e?void 0:e.priority}),copy_expiration_date:(0,h._b)(null===e||void 0===e?void 0:e.expiration_date,"d.M.yyyy")})})},[O,z]),R=(0,d.useMemo)(function(){return{name:g({id:"client.name"}),driver:g({id:"nav.drivers"}),vehicle:g({id:"nav.vehicles.and.trailers"}),alarm_type:g({id:"alarm.type"}),num_dates_from:g({id:"alarm.num.dates.from"}),num_dates_to:g({id:"alarm.num.dates.to"}),deadline_to:g({id:"alarm.deadline.to"})}},[g]);return(0,f.jsxs)(f.Fragment,{children:[null===A||void 0===A?void 0:A(g),(0,f.jsx)(m.A,(0,r.A)({search_type:"alarms",fieldLabels:R,roleCondition:b&&!i},H)),(0,f.jsx)(p.A,{localOnly:!0,hasRefresh:!0}),(0,f.jsx)(_.A,{type:"alarms",data:(0,h.CB)(V,j),loading:S||k})]})}))},83244:function(e,i,a){var r=a(23235),n=a(44414);i.A=(0,r.A)((0,n.jsx)("path",{d:"M7 11h2v2H7zm14-5v14c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2l.01-14c0-1.1.88-2 1.99-2h1V2h2v2h8V2h2v2h1c1.1 0 2 .9 2 2M5 8h14V6H5zm14 12V10H5v10zm-4-7h2v-2h-2zm-4 0h2v-2h-2z"}),"DateRangeOutlined")},85167:function(e,i,a){a.d(i,{A:function(){return z}});var r=a(89379),n=a(5544),t=a(80045),d=a(9950),l=a(54408),o={container:"CustomPreview_container__-petM",graphWrapper:"CustomPreview_graphWrapper__eIzWH",textWrapper:"CustomPreview_textWrapper__uU5GZ",nameWrapper:"CustomPreview_nameWrapper__+0rFi",type:"CustomPreview_type__y+Rms",source:"CustomPreview_source__SUpMy",expiration_date:"CustomPreview_expiration_date__gCz5T",bottomWrapper:"CustomPreview_bottomWrapper__HFUeH",deadline:"CustomPreview_deadline__h6u5l",icon:"CustomPreview_icon__YbYSQ"},c=a(83137),s=a(82109),v={switchWrapper:"hooks_switchWrapper__MSQSf",switch:"hooks_switch__nJMU6",switchTab:"hooks_switchTab__ENJIs",viewTypeActive:"hooks_viewTypeActive__EBp0T"},u=a(5731),h=a(44414),m=a(27162),p=a(67078),_=a(27406),f=a(41612),w=a(83244),A=a(47051),g=a(60436),x=a(97072),y=a(14622),j=a(53085),C=a(59001),N=function(e){var i=e.hasPermission,a=e.formatMessage,r={id:a({id:"table.number"}),name:a({id:"client.name"}),alarm_type:a({id:"alarm.type"}),alarm_source:a({id:"alarm.source"}),priority:a({id:"alarm.priority"}),expiration_date:a({id:"alarm.date"}),deadline:a({id:"alarm.deadline"})};return[{field:"orderId",headerName:r.id,width:100,headerAlign:"center",align:"center"}].concat((0,g.A)(i?[{field:"name",headerName:r.name,width:300,headerAlign:"center",align:"center"}]:[]),[{field:"alarm_type",headerName:r.alarm_type,width:280,headerAlign:"center",align:"center"},{field:"alarm_source",headerName:r.alarm_source,width:300,headerAlign:"center",align:"center"},{field:"priority",headerName:r.priority,width:200,headerAlign:"center",align:"center",renderCell:function(e){var i=e.row;return(0,h.jsx)(p.A,{data:null===i||void 0===i?void 0:i.priority})}},{field:"expiration_date",headerName:r.expiration_date,width:200,headerAlign:"center",align:"center",renderCell:function(e){var i=e.row;return(0,c.Yq)(null===i||void 0===i?void 0:i.expiration_date,"dateOnly")}},{field:"deadline",headerName:r.deadline,width:150,headerAlign:"center",align:"center"}])},b=function(e){var i=e.hasPermission,a=e.formatMessage,r={id:a({id:"table.number"}),type:a({id:"file.type"}),client:a({id:"client.name"}),vehicle:a({id:"nav.vehicles.and.trailers"}),driver:a({id:"nav.drivers"}),name:a({id:"file.name"}),date_created:a({id:"date.created"}),status:a({id:"filter.status"})};return[{field:"id",headerName:r.id,width:100,headerAlign:"center",align:"center"},{field:"type",headerName:r.type,width:250,headerAlign:"center",align:"center",renderCell:function(e){var i=e.row;return(0,h.jsx)(p.A,{data:{id:"type_".concat(null===i||void 0===i?void 0:i.id),name:null===i||void 0===i?void 0:i.type}})}}].concat((0,g.A)(i?[{field:"client",headerName:r.client,width:200,headerAlign:"center",align:"center",renderCell:function(e){var i=e.row;return(0,h.jsx)(p.A,{data:{id:"client_".concat(null===i||void 0===i?void 0:i.id),name:null===i||void 0===i?void 0:i.client}})}},{field:"vehicle",headerName:r.vehicle,width:200,headerAlign:"center",align:"center",renderCell:function(e){var i=e.row;return(0,h.jsx)(p.A,{data:{id:"vehicle_".concat(null===i||void 0===i?void 0:i.id),name:null===i||void 0===i?void 0:i.vehicle}})}},{field:"driver",headerName:r.driver,width:200,headerAlign:"center",align:"center",renderCell:function(e){var i=e.row;return(0,h.jsx)(p.A,{data:{id:"driver_".concat(null===i||void 0===i?void 0:i.id),name:null===i||void 0===i?void 0:i.driver}})}}]:[]),[{field:"url",headerName:r.name,width:350,headerAlign:"center",align:"center",renderCell:function(e){var i=e.row;return(0,h.jsxs)("div",{className:"d-flex align-items-center text-decoration-underline iconHover",onClick:function(){return(0,c.zc)(null===i||void 0===i?void 0:i.url,null===i||void 0===i?void 0:i.name)},children:[(0,h.jsx)("div",{className:"me-2",children:(0,h.jsx)(C.A,{className:"icon_24"})}),(0,h.jsx)("div",{children:null===i||void 0===i?void 0:i.name})]})}},{field:"date_created",headerName:r.date_created,width:200,headerAlign:"center",align:"center",renderCell:function(e){var i=e.row;return(0,c.Yq)(null===i||void 0===i?void 0:i.date_created)}},{field:"status",headerName:r.status,width:200,headerAlign:"center",align:"center",renderCell:function(e){var i=e.row;return(0,h.jsx)(p.A,{type:"active",data:null===i||void 0===i?void 0:i.status})}}])},M=["type","data","loading","customFirstOption","intl"],z=(0,d.memo)((0,l.Ay)(function(e){var i,a,l=e.type,g=e.data,C=e.loading,z=e.customFirstOption,k=e.intl.formatMessage,P=(0,t.A)(e,M),W=(0,d.useMemo)(function(){return["reports"===l]},[l]),H=(0,n.A)(W,1)[0],I=(0,s.w)({roleNames:["superadmin","admin","podadmin"]}),O=(0,n.A)(I,1)[0],S=function(e){var i,a=e.type,r=e.hasPermission,n=e.formatMessage,t={alarms:function(){return{defaultSwitch:"graph",switchOptions:[{id:"graph",label:n({id:"alarm.view.graph"}),Icon:y.A},{id:"table",label:n({id:"alarm.view.table"}),Icon:x.A}],columns:N({hasPermission:r,formatMessage:n})}},reports:function(){return{defaultSwitch:"graph",switchOptions:[{id:"graph",label:n({id:"alarm.view.graph"}),Icon:j.A},{id:"table",label:n({id:"alarm.view.table"}),Icon:x.A}],columns:b({hasPermission:r,formatMessage:n})}}};return(null===(i=t[a])||void 0===i?void 0:i.call(t))||{}}({type:l,hasPermission:O,formatMessage:k}),V=S.switchOptions,R=S.defaultSwitch,T=S.columns,F=function(e){var i=e.switchOptions,a=e.defaultSwitch,t=void 0===a?"":a,l=e.className,o=void 0===l?"":l,s=(0,d.useState)(t),m=(0,n.A)(s,2),p=m[0],_=m[1];return{renderSwitch:function(){return(0,h.jsx)("div",(0,r.A)((0,r.A)({className:[v.switchWrapper,o].join(" ")},(0,c.BG)({delay:"200"})),{},{children:(0,h.jsx)("div",{className:v.switch,children:null===i||void 0===i?void 0:i.map(function(e,i){var a=e.id,n=e.label,t=e.Icon,d=a===p;return(0,h.jsxs)("div",{onClick:function(){return _(a)},className:[v.switchTab,d?v.viewTypeActive:""].join(" "),children:[(0,h.jsx)("div",{children:(0,h.jsx)(t,(0,r.A)({className:"icon_24"},d?{stroke:u.vz,sx:{color:u.vz}}:{}))}),(0,h.jsx)("div",{children:n})]},"option_".concat(a,"_").concat(i))})})}))},switchView:p}}({switchOptions:V,defaultSwitch:R}),D=F.renderSwitch,Q=F.switchView,q=(0,d.useMemo)(function(){return[Q===R]},[Q,R]),Y=(0,n.A)(q,1)[0];(0,d.useEffect)(function(){var e;Y&&(null===P||void 0===P?void 0:P.editData)&&(null===P||void 0===P||null===(e=P.selectRow)||void 0===e||e.call(P,null))},[Y]);return(0,h.jsxs)(h.Fragment,{children:[D(),Y?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:["descriptionGrid",o.container].join(" "),children:C?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(_.A,{type:"default",singleColumn:!0}),(0,h.jsx)(_.A,{type:"default",singleColumn:!0})]}):(null===z||void 0===z?void 0:z())||(null===g||void 0===g?void 0:g.map(function(e,i){var a=e.id,n=e.orderId,t=e.name,d=e.alarm_type,l=e.alarm_source,s=e.priority,v=e.expiration_date,u=e.deadline,m=(s||{}).color,_="".concat(m,"17"),f=(0,h.jsxs)("div",{className:o.deadline,children:[(0,h.jsx)("span",{children:(0,h.jsx)(w.A,{className:o.icon})}),(0,h.jsx)("span",{children:u})]});return(0,h.jsx)("div",(0,r.A)((0,r.A)({},(0,c.BG)()),{},{children:(0,h.jsxs)("div",{className:o.graphWrapper,style:{borderColor:m,backgroundColor:_},children:[(0,h.jsxs)("div",{className:o.textWrapper,children:[!!O&&(0,h.jsxs)("div",{className:o.nameWrapper,children:[(0,h.jsx)("div",{children:(0,h.jsx)(A.A,{sx:{color:m}})}),(0,h.jsx)("div",{children:t})]}),(0,h.jsx)("div",{className:o.type,style:{color:m},children:d}),(0,h.jsx)("div",{className:o.source,children:l}),(0,h.jsx)("div",{className:o.expiration_date,children:(0,c.Yq)(v,"dateOnly")})]}),(0,h.jsxs)("div",{className:o.bottomWrapper,children:[(0,h.jsx)(p.A,{data:s,large:!0}),(0,h.jsx)(p.A,{data:{id:a,name:f,color:m},large:!0})]})]})}),"".concat(a,"_").concat(n,"_").concat(i))}))}),!C&&!(null!==z&&void 0!==z&&null!==(i=z())&&void 0!==i&&i.length||null!==g&&void 0!==g&&g.length)&&(0,h.jsx)(f.A,{})]}):(0,h.jsxs)("div",{children:[(0,h.jsx)(m.A,(0,r.A)({isActive:!0,loading:C,data:g,columns:T},H&&null!==P&&void 0!==P&&P.render?{editData:null===P||void 0===P?void 0:P.editData,selectRow:null===P||void 0===P?void 0:P.selectRow,selectRowDoubleClick:null===P||void 0===P?void 0:P.selectRowDoubleClick}:{disableRowSelectionOnClick:!0,noFirstColumn:!0})),null===P||void 0===P||null===(a=P.render)||void 0===a?void 0:a.call(P,T)]})]})}))},97072:function(e,i,a){var r=a(23235),n=a(44414);i.A=(0,r.A)((0,n.jsx)("path",{d:"M19 7H9c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2m0 2v2H9V9zm-6 6v-2h2v2zm2 2v2h-2v-2zm-4-2H9v-2h2zm6-2h2v2h-2zm-8 4h2v2H9zm8 2v-2h2v2zM6 17H5c-1.1 0-2-.9-2-2V5c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v1h-2V5H5v10h1z"}),"TableViewOutlined")}}]);
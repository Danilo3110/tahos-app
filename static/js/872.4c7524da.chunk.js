"use strict";(self.webpackChunktahos_lat=self.webpackChunktahos_lat||[]).push([[872],{64872:function(e,i,a){a.r(i),a.d(i,{default:function(){return b}});var t=a(89379),r=a(80045),n=a(5544),l=a(9950),d=a(54408),o=a(10300),s=a(95250),c=a(82109),u=a(4297),v=a(83137),m=a(49389),h=a(65510),p=a(85167),f=a(49395),_=a(91212),w=a(10467),A=a(45131),g=a(93320),x=a(70298),y=a(39412),j=a(44414),C=(0,l.memo)((0,d.Ay)(function(e){var i=e.modal,a=e.handleClose,r=e.editData,n=e.columns,l=e.dataAll,d=e.setDataAll,s=e.intl.formatMessage,c=(0,o.wA)(),u=function(e){return c(A.yK(e))},m=function(e){return c(A.Lm(e))},h=function(){var e=(0,w.A)((0,_.A)().m(function e(){var t,n,o,s,c,h,p,f,w,A;return(0,_.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:return u(!0),t={status:{url:"/reports/change_status.php",postData:{id:null===r||void 0===r?void 0:r.id}}},o=(n=t[i]||{}).url,s=n.postData,c=void 0===s?null:s,h=n.actionData,e.p=1,e.n=2,(0,g.c)({method:"POST",query:o,data:c});case 2:p=e.v,f=p.data,w=(0,v.XF)(l,h||(null===f||void 0===f?void 0:f.data),i),d(w),a(),m({serverMessage:null===f||void 0===f?void 0:f.message}),e.n=4;break;case 3:e.p=3,A=e.v,m({serverMessage:(0,v.b6)(A),color:"error"});case 4:return e.p=4,u(!1),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}();return function(){var e,l=x.A,d={status:function(){return{title:s({id:"modal.status"}),message:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(y.A,{fieldData:(0,v.Un)({columns:n,editData:r})}),(0,v.GC)({active:null===r||void 0===r?void 0:r.status,formatMessage:s})]}),confirmationHandler:h,confirmButtonType:"primary"}}};return(0,j.jsx)(l,(0,t.A)({open:!!i,handleClose:a,maxWidth:"md"},null===(e=d[i])||void 0===e?void 0:e.call(d)))}()})),N=["urlQuery"],b=(0,l.memo)((0,d.Ay)(function(e){var i=e.clientId,a=e.clientIdQuery,d=void 0===a?"":a,_=e.helmet,w=e.intl.formatMessage,A=(0,o.d4)(function(e){return e.dataTable}).local_query,g=(0,c.w)({roleNames:["superadmin","admin","podadmin"]}),x=(0,n.A)(g,1)[0],y=(0,u.c)({clientId:i,clientIdQuery:d,formatMessage:w}),b=y.urlQuery,M=(0,r.A)(y,N),D=(0,s.X)({url:"/reports/list.php?delay=1".concat(b),hasRefetch:!0,keepQuery:!0}),k=D.data,P=D.setData,W=D.loading,S=(0,l.useMemo)(function(){return(0,v.XH)({responseData:k,itemActiveName:"status",formatingFn:function(e){return{copy_date_created:(0,v._b)(null===e||void 0===e?void 0:e.date_created,"d.M.yyyy")}},formatMessage:w})},[k,w]),F=(0,l.useMemo)(function(){return(0,v.CB)(S,A)},[S,A]),I=(0,l.useState)(null),O=(0,n.A)(I,2),R=O[0],T=O[1],Q=(0,l.useState)(!1),H=(0,n.A)(Q,2),q=H[0],z=H[1],B=function(){z(!1),R&&T(null)},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.modalAction,a=e.row;T(a),z(i)},U=(0,l.useMemo)(function(){return{name:w({id:"client.name"}),driver:w({id:"nav.drivers"}),vehicle:w({id:"nav.vehicles.and.trailers"}),type:w({id:"file.type"}),status:w({id:"filter.status"}),date_from:w({id:"date.from"}),date_to:w({id:"date.to"})}},[w]),Y=(0,l.useMemo)(function(){return{status:function(){return z("status")}}},[R]);return(0,j.jsxs)(j.Fragment,{children:[null===_||void 0===_?void 0:_(w),(0,j.jsx)(m.A,(0,t.A)({search_type:"reports",fieldLabels:U,roleCondition:x&&!i},M)),(0,j.jsx)(h.A,(0,t.A)({hasRefresh:!0},x?{defaultCrudActions:Y,disabled:!R}:{localOnly:!0})),(0,j.jsx)(p.A,(0,t.A)({type:"reports",data:F},(0,t.A)({loading:W,customFirstOption:function(){return(0,j.jsx)(f.A,{customData:F})}},x&&(0,t.A)({},{editData:R,selectRow:T,selectRowDoubleClick:G,render:function(e){return(0,j.jsx)(C,{modal:q,handleClose:B,editData:R,columns:e,dataAll:S,setDataAll:P})}}))))]})}))},85167:function(e,i,a){a.d(i,{A:function(){return D}});var t=a(89379),r=a(5544),n=a(80045),l=a(9950),d=a(54408),o={container:"CustomPreview_container__-petM",graphWrapper:"CustomPreview_graphWrapper__eIzWH",textWrapper:"CustomPreview_textWrapper__uU5GZ",nameWrapper:"CustomPreview_nameWrapper__+0rFi",type:"CustomPreview_type__y+Rms",source:"CustomPreview_source__SUpMy",expiration_date:"CustomPreview_expiration_date__gCz5T",bottomWrapper:"CustomPreview_bottomWrapper__HFUeH",deadline:"CustomPreview_deadline__h6u5l",icon:"CustomPreview_icon__YbYSQ"},s=a(83137),c=a(82109),u={switchWrapper:"hooks_switchWrapper__MSQSf",switch:"hooks_switch__nJMU6",switchTab:"hooks_switchTab__ENJIs",viewTypeActive:"hooks_viewTypeActive__EBp0T"},v=a(5731),m=a(44414),h=a(27162),p=a(67078),f=a(27406),_=a(41612),w=a(83244),A=a(47051),g=a(60436),x=a(97072),y=a(14622),j=a(53085),C=a(59001),N=function(e){var i=e.hasPermission,a=e.formatMessage,t={id:a({id:"table.number"}),name:a({id:"client.name"}),alarm_type:a({id:"alarm.type"}),alarm_source:a({id:"alarm.source"}),priority:a({id:"alarm.priority"}),expiration_date:a({id:"alarm.date"}),deadline:a({id:"alarm.deadline"})};return[{field:"orderId",headerName:t.id,width:100,headerAlign:"center",align:"center"}].concat((0,g.A)(i?[{field:"name",headerName:t.name,width:300,headerAlign:"center",align:"center"}]:[]),[{field:"alarm_type",headerName:t.alarm_type,width:280,headerAlign:"center",align:"center"},{field:"alarm_source",headerName:t.alarm_source,width:300,headerAlign:"center",align:"center"},{field:"priority",headerName:t.priority,width:200,headerAlign:"center",align:"center",renderCell:function(e){var i=e.row;return(0,m.jsx)(p.A,{data:null===i||void 0===i?void 0:i.priority})}},{field:"expiration_date",headerName:t.expiration_date,width:200,headerAlign:"center",align:"center",renderCell:function(e){var i=e.row;return(0,s.Yq)(null===i||void 0===i?void 0:i.expiration_date,"dateOnly")}},{field:"deadline",headerName:t.deadline,width:150,headerAlign:"center",align:"center"}])},b=function(e){var i=e.hasPermission,a=e.formatMessage,t={id:a({id:"table.number"}),type:a({id:"file.type"}),client:a({id:"client.name"}),vehicle:a({id:"nav.vehicles.and.trailers"}),driver:a({id:"nav.drivers"}),name:a({id:"file.name"}),date_created:a({id:"date.created"}),status:a({id:"filter.status"})};return[{field:"id",headerName:t.id,width:100,headerAlign:"center",align:"center"},{field:"type",headerName:t.type,width:250,headerAlign:"center",align:"center",renderCell:function(e){var i=e.row;return(0,m.jsx)(p.A,{data:{id:"type_".concat(null===i||void 0===i?void 0:i.id),name:null===i||void 0===i?void 0:i.type}})}}].concat((0,g.A)(i?[{field:"client",headerName:t.client,width:200,headerAlign:"center",align:"center",renderCell:function(e){var i=e.row;return(0,m.jsx)(p.A,{data:{id:"client_".concat(null===i||void 0===i?void 0:i.id),name:null===i||void 0===i?void 0:i.client}})}},{field:"vehicle",headerName:t.vehicle,width:200,headerAlign:"center",align:"center",renderCell:function(e){var i=e.row;return(0,m.jsx)(p.A,{data:{id:"vehicle_".concat(null===i||void 0===i?void 0:i.id),name:null===i||void 0===i?void 0:i.vehicle}})}},{field:"driver",headerName:t.driver,width:200,headerAlign:"center",align:"center",renderCell:function(e){var i=e.row;return(0,m.jsx)(p.A,{data:{id:"driver_".concat(null===i||void 0===i?void 0:i.id),name:null===i||void 0===i?void 0:i.driver}})}}]:[]),[{field:"url",headerName:t.name,width:350,headerAlign:"center",align:"center",renderCell:function(e){var i=e.row;return(0,m.jsxs)("div",{className:"d-flex align-items-center text-decoration-underline iconHover",onClick:function(){return(0,s.zc)(null===i||void 0===i?void 0:i.url,null===i||void 0===i?void 0:i.name)},children:[(0,m.jsx)("div",{className:"me-2",children:(0,m.jsx)(C.A,{className:"icon_24"})}),(0,m.jsx)("div",{children:null===i||void 0===i?void 0:i.name})]})}},{field:"date_created",headerName:t.date_created,width:200,headerAlign:"center",align:"center",renderCell:function(e){var i=e.row;return(0,s.Yq)(null===i||void 0===i?void 0:i.date_created)}},{field:"status",headerName:t.status,width:200,headerAlign:"center",align:"center",renderCell:function(e){var i=e.row;return(0,m.jsx)(p.A,{type:"active",data:null===i||void 0===i?void 0:i.status})}}])},M=["type","data","loading","customFirstOption","intl"],D=(0,l.memo)((0,d.Ay)(function(e){var i,a,d=e.type,g=e.data,C=e.loading,D=e.customFirstOption,k=e.intl.formatMessage,P=(0,n.A)(e,M),W=(0,l.useMemo)(function(){return["reports"===d]},[d]),S=(0,r.A)(W,1)[0],F=(0,c.w)({roleNames:["superadmin","admin","podadmin"]}),I=(0,r.A)(F,1)[0],O=function(e){var i,a=e.type,t=e.hasPermission,r=e.formatMessage,n={alarms:function(){return{defaultSwitch:"graph",switchOptions:[{id:"graph",label:r({id:"alarm.view.graph"}),Icon:y.A},{id:"table",label:r({id:"alarm.view.table"}),Icon:x.A}],columns:N({hasPermission:t,formatMessage:r})}},reports:function(){return{defaultSwitch:"graph",switchOptions:[{id:"graph",label:r({id:"alarm.view.graph"}),Icon:j.A},{id:"table",label:r({id:"alarm.view.table"}),Icon:x.A}],columns:b({hasPermission:t,formatMessage:r})}}};return(null===(i=n[a])||void 0===i?void 0:i.call(n))||{}}({type:d,hasPermission:I,formatMessage:k}),R=O.switchOptions,T=O.defaultSwitch,Q=O.columns,H=function(e){var i=e.switchOptions,a=e.defaultSwitch,n=void 0===a?"":a,d=e.className,o=void 0===d?"":d,c=(0,l.useState)(n),h=(0,r.A)(c,2),p=h[0],f=h[1];return{renderSwitch:function(){return(0,m.jsx)("div",(0,t.A)((0,t.A)({className:[u.switchWrapper,o].join(" ")},(0,s.BG)({delay:"200"})),{},{children:(0,m.jsx)("div",{className:u.switch,children:null===i||void 0===i?void 0:i.map(function(e,i){var a=e.id,r=e.label,n=e.Icon,l=a===p;return(0,m.jsxs)("div",{onClick:function(){return f(a)},className:[u.switchTab,l?u.viewTypeActive:""].join(" "),children:[(0,m.jsx)("div",{children:(0,m.jsx)(n,(0,t.A)({className:"icon_24"},l?{stroke:v.vz,sx:{color:v.vz}}:{}))}),(0,m.jsx)("div",{children:r})]},"option_".concat(a,"_").concat(i))})})}))},switchView:p}}({switchOptions:R,defaultSwitch:T}),q=H.renderSwitch,z=H.switchView,B=(0,l.useMemo)(function(){return[z===T]},[z,T]),G=(0,r.A)(B,1)[0];(0,l.useEffect)(function(){var e;G&&(null===P||void 0===P?void 0:P.editData)&&(null===P||void 0===P||null===(e=P.selectRow)||void 0===e||e.call(P,null))},[G]);return(0,m.jsxs)(m.Fragment,{children:[q(),G?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:["descriptionGrid",o.container].join(" "),children:C?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(f.A,{type:"default",singleColumn:!0}),(0,m.jsx)(f.A,{type:"default",singleColumn:!0})]}):(null===D||void 0===D?void 0:D())||(null===g||void 0===g?void 0:g.map(function(e,i){var a=e.id,r=e.orderId,n=e.name,l=e.alarm_type,d=e.alarm_source,c=e.priority,u=e.expiration_date,v=e.deadline,h=(c||{}).color,f="".concat(h,"17"),_=(0,m.jsxs)("div",{className:o.deadline,children:[(0,m.jsx)("span",{children:(0,m.jsx)(w.A,{className:o.icon})}),(0,m.jsx)("span",{children:v})]});return(0,m.jsx)("div",(0,t.A)((0,t.A)({},(0,s.BG)()),{},{children:(0,m.jsxs)("div",{className:o.graphWrapper,style:{borderColor:h,backgroundColor:f},children:[(0,m.jsxs)("div",{className:o.textWrapper,children:[!!I&&(0,m.jsxs)("div",{className:o.nameWrapper,children:[(0,m.jsx)("div",{children:(0,m.jsx)(A.A,{sx:{color:h}})}),(0,m.jsx)("div",{children:n})]}),(0,m.jsx)("div",{className:o.type,style:{color:h},children:l}),(0,m.jsx)("div",{className:o.source,children:d}),(0,m.jsx)("div",{className:o.expiration_date,children:(0,s.Yq)(u,"dateOnly")})]}),(0,m.jsxs)("div",{className:o.bottomWrapper,children:[(0,m.jsx)(p.A,{data:c,large:!0}),(0,m.jsx)(p.A,{data:{id:a,name:_,color:h},large:!0})]})]})}),"".concat(a,"_").concat(r,"_").concat(i))}))}),!C&&!(null!==D&&void 0!==D&&null!==(i=D())&&void 0!==i&&i.length||null!==g&&void 0!==g&&g.length)&&(0,m.jsx)(_.A,{})]}):(0,m.jsxs)("div",{children:[(0,m.jsx)(h.A,(0,t.A)({isActive:!0,loading:C,data:g,columns:Q},S&&null!==P&&void 0!==P&&P.render?{editData:null===P||void 0===P?void 0:P.editData,selectRow:null===P||void 0===P?void 0:P.selectRow,selectRowDoubleClick:null===P||void 0===P?void 0:P.selectRowDoubleClick}:{disableRowSelectionOnClick:!0,noFirstColumn:!0})),null===P||void 0===P||null===(a=P.render)||void 0===a?void 0:a.call(P,Q)]})]})}))}}]);
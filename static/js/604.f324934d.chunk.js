"use strict";(self.webpackChunktahos_lat=self.webpackChunktahos_lat||[]).push([[109,604],{39144:function(r,i,n){n.r(i),n.d(i,{default:function(){return I}});var e=n(89379),t=n(5544),a=n(80045),o=n(9950),l=n(54408),d=n(10300),u=n(49389),s=n(83137),c=n(95250),f=n(4297),g=n(27162),m=n(65510),p=n(67078),w=n(91212),v=n(10467),y=n(45131),_=n(93320),h=n(73275),A=n(17419),k=n(70298),b=n(70742),x=n(39412),j=n(85546),q=n(29714),C={warning1_rok:"",warning2_rok:"",warning3_rok:"",warning1_priority:null,warning2_priority:null,warning3_priority:null},M=function(r){var i=r.fieldLabels,n=r.formatMessage;return(0,q.Ik)().shape({warning1_rok:(0,q.ai)().required((0,j.w)(n,i.warning1_rok,"required")),warning2_rok:(0,q.ai)().required((0,j.w)(n,i.warning2_rok,"required")),warning3_rok:(0,q.ai)().required((0,j.w)(n,i.warning3_rok,"required")),warning1_priority:(0,q.Ik)().required((0,j.w)(n,i.warning1_priority,"filter")),warning2_priority:(0,q.Ik)().required((0,j.w)(n,i.warning2_priority,"filter")),warning3_priority:(0,q.Ik)().required((0,j.w)(n,i.warning3_priority,"filter"))})},D=n(44414),N=["warning1_priority","warning2_priority","warning3_priority"],F=(0,o.memo)((0,l.Ay)(function(r){var i=r.modal,n=r.handleClose,t=r.editData,l=r.fieldLabels,u=r.columns,c=r.dataAll,f=r.setDataAll,g=r.intl.formatMessage,m=(0,d.d4)(function(r){return r.login}).spinner,p=(0,d.wA)(),j=function(r){return p(y.yK(r))},q=function(r){return p(y.Lm(r))},F=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.warning1_priority,n=r.warning2_priority,t=r.warning3_priority,o=(0,a.A)(r,N);return(0,e.A)((0,e.A)({},o),{},{warning1_priority:null===i||void 0===i?void 0:i.id,warning2_priority:null===n||void 0===n?void 0:n.id,warning3_priority:null===t||void 0===t?void 0:t.id})},L=function(){var r=(0,v.A)((0,w.A)().m(function r(a){var o,l,d,u,g,m,p,v,y,h,A,k;return(0,w.A)().w(function(r){for(;;)switch(r.p=r.n){case 0:if(j(!0),l=a&&F(a),u=(null===(o=(d={edit:function(){return{url:"/alarms/edit_settings.php",postData:(0,e.A)({id:null===t||void 0===t?void 0:t.id},l)}},status:function(){return{url:"/alarms/change_status_settings.php",postData:{id:null===t||void 0===t?void 0:t.id}}}})[i])||void 0===o?void 0:o.call(d))||{},g=u.url,m=u.postData,p=void 0===m?null:m,v=u.actionData,!g){r.n=6;break}return r.p=1,r.n=2,(0,_.c)({method:"POST",query:g,data:p});case 2:y=r.v,h=y.data,A=(0,s.XF)(c,v||(null===h||void 0===h?void 0:h.data),i),f(A),n(),q({serverMessage:null===h||void 0===h?void 0:h.message}),r.n=4;break;case 3:r.p=3,k=r.v,q({serverMessage:(0,s.b6)(k),color:"error"});case 4:return r.p=4,j(!1),r.f(4);case 5:r.n=7;break;case 6:j(!1);case 7:return r.a(2)}},r,null,[[1,3,4,5]])}));return function(i){return r.apply(this,arguments)}}(),I=(0,h.P)({initialValues:C,editData:t,validationSchema:M({fieldLabels:l,formatMessage:g}),onSubmit:L,keyName:"config_alarms"}),T=I.formik,S=I.renderMultipleInputs,W=I.renderMultipleFilters,B=(0,o.useMemo)(function(){return[{name:"warning1_rok",required:!0,label:l.warning1_rok,type:"number"},{name:"warning2_rok",required:!0,label:l.warning2_rok,type:"number"},{name:"warning3_rok",required:!0,label:l.warning3_rok,type:"number"}]},[l]),G=(0,o.useMemo)(function(){return[{name:"warning1_priority",required:!0,label:l.warning1_priority,refresh:!0,url:"priority/list.php",type:"priority"},{name:"warning2_priority",required:!0,label:l.warning2_priority,refresh:!0,url:"priority/list.php",type:"priority"},{name:"warning3_priority",required:!0,label:l.warning3_priority,refresh:!0,url:"priority/list.php",type:"priority"}]},[l]);return function(){var r,a=["edit"].includes(i)?A.A:k.A,o={edit:function(){return{title:g({id:"modal.edit"}),message:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(x.A,{fieldData:(0,s.Un)({columns:u,editData:t})}),(0,D.jsxs)("div",{className:"mt-5 modalFormGrid",children:[(0,D.jsx)("div",{children:S(B)}),(0,D.jsx)("div",{children:W(G)})]})]}),footer:(0,D.jsx)(b.A,{handleSubmit:null===T||void 0===T?void 0:T.handleSubmit,rejectAction:n,spinner:m})}},status:function(){return{title:g({id:"modal.status"}),message:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(x.A,{fieldData:(0,s.Un)({columns:u,editData:t})}),(0,s.GC)({active:null===t||void 0===t?void 0:t.aktivan,formatMessage:g})]}),confirmationHandler:L,confirmButtonType:"primary"}}};return(0,D.jsx)(a,(0,e.A)({open:!!i,handleClose:n,maxWidth:"md"},null===(r=o[i])||void 0===r?void 0:r.call(o)))}()})),L=["urlQuery"],I=(0,o.memo)((0,l.Ay)(function(r){var i=r.helmet,n=r.intl.formatMessage,l=(0,d.d4)(function(r){return r.dataTable}).local_query,w=(0,c.X)({url:"/priority/list.php",keepQuery:!0}),v=w.data,y=w.loading,_=(0,f.c)({formatMessage:n}),h=_.urlQuery,A=(0,a.A)(_,L),k=(0,c.X)({url:"/alarms/settings.php?delay=1".concat(h),hasRefetch:!0,keepQuery:!0}),b=k.data,x=k.setData,j=k.loading,q=(0,o.useMemo)(function(){return(0,s.XH)({responseData:b,itemActiveName:"aktivan",configData:["warning1_priority","warning2_priority","warning3_priority"].map(function(r){return{itemName:r,arrayData:v}}),formatingFn:function(r){return{copy_updated_at:(0,s._b)(null===r||void 0===r?void 0:r.updated_at,"d.M.yyyy")}},formatMessage:n})},[b,v,n]),C=(0,o.useState)(null),M=(0,t.A)(C,2),N=M[0],I=M[1],T=(0,o.useState)(!1),S=(0,t.A)(T,2),W=S[0],B=S[1],G=(0,o.useMemo)(function(){return{id:n({id:"table.number"}),type:n({id:"alarm.type"}),warning1_rok:n({id:"config.alarm.warning.1"}),warning1_priority:n({id:"config.alarm.priority.1"}),warning2_rok:n({id:"config.alarm.warning.2"}),warning2_priority:n({id:"config.alarm.priority.2"}),warning3_rok:n({id:"config.alarm.warning.3"}),warning3_priority:n({id:"config.alarm.priority.3"}),status:n({id:"filter.status"}),updated_at:n({id:"date.updated"})}},[n]),Q=(0,o.useMemo)(function(){return[{field:"id",headerName:G.id,width:100,headerAlign:"center",align:"center",infoField:!0},{field:"tip_alarma_naziv",headerName:G.type,width:280,headerAlign:"center",align:"center",infoField:!0},{field:"warning1_rok",headerName:G.warning1_rok,width:200,headerAlign:"center",align:"center"},{field:"warning1_priority",headerName:G.warning1_priority,width:200,headerAlign:"center",align:"center",renderCell:function(r){var i=r.row;return(0,D.jsx)(p.A,{data:null===i||void 0===i?void 0:i.warning1_priority})}},{field:"warning2_rok",headerName:G.warning2_rok,width:200,headerAlign:"center",align:"center"},{field:"warning2_priority",headerName:G.warning2_priority,width:200,headerAlign:"center",align:"center",renderCell:function(r){var i=r.row;return(0,D.jsx)(p.A,{data:null===i||void 0===i?void 0:i.warning2_priority})}},{field:"warning3_rok",headerName:G.warning3_rok,width:200,headerAlign:"center",align:"center"},{field:"warning3_priority",headerName:G.warning3_priority,width:200,headerAlign:"center",align:"center",renderCell:function(r){var i=r.row;return(0,D.jsx)(p.A,{data:null===i||void 0===i?void 0:i.warning3_priority})}},{field:"aktivan",headerName:G.status,width:200,headerAlign:"center",align:"center",renderCell:function(r){var i=r.row;return(0,D.jsx)(p.A,{type:"active",data:null===i||void 0===i?void 0:i.aktivan})},infoField:!0},{field:"updated_at",headerName:G.updated_at,width:250,headerAlign:"center",align:"center",renderCell:function(r){var i=r.row;return(0,s.Yq)(null===i||void 0===i?void 0:i.updated_at)},infoField:!0}]},[G,s.Yq]),R=(0,o.useMemo)(function(){return{edit:function(){return B("edit")},status:function(){return B("status")}}},[N]);return(0,D.jsxs)(D.Fragment,{children:[null===i||void 0===i?void 0:i(n),(0,D.jsx)(u.A,(0,e.A)({search_type:"config_alarms",fieldLabels:G},A)),(0,D.jsx)(m.A,{hasRefresh:!0,defaultCrudActions:R,disabled:!N}),(0,D.jsx)(g.A,{isActive:!0,editData:N,loading:j||y,data:(0,s.CB)(q,l),columns:Q,selectRow:I,selectRowDoubleClick:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.modalAction,n=r.row;I(n),B(i)}}),(0,D.jsx)(F,{modal:W,handleClose:function(){B(!1),N&&I(null)},editData:N,fieldLabels:G,columns:null===Q||void 0===Q?void 0:Q.filter(function(r){return r.infoField}),dataAll:q,setDataAll:x})]})}))},39412:function(r,i,n){n.d(i,{A:function(){return s}});var e=n(9950),t=n(41397),a="InfoFields_fieldContainer__T-mr8",o="InfoFields_title__kg-LW",l="InfoFields_text__rIG7K",d=n(44414),u=function(r){var i=r.fieldData,n=r.noWrapper,u=function(){return null===i||void 0===i?void 0:i.map(function(){var r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=i.title,u=void 0===n?"":n,s=i.text,c=arguments.length>1?arguments[1]:void 0;return(0,d.jsxs)("div",{className:a,children:[(0,d.jsx)("div",{className:o,children:"".concat(u,":")}),(0,d.jsx)("div",{className:l,children:(r=s,(0,e.isValidElement)(r)||Array.isArray(r)&&(null===r||void 0===r?void 0:r.every(e.isValidElement))||!(0,t.isPlainObject)(r)&&!Array.isArray(r)&&r?r:"-")})]},"field_".concat(c+1))})};return n?u():(0,d.jsx)("div",{className:"descriptionGrid",children:u()})},s=(0,e.memo)(u)},70298:function(r,i,n){var e=n(89379),t=n(9950),a=n(54408),o=n(10300),l=n(17419),d=n(83325),u=n(44414);i.A=(0,t.memo)((0,a.Ay)(function(r){var i=r.open,n=r.title,a=r.message,s=r.confirmationHandler,c=r.handleClose,f=r.maxWidth,g=r.confirmOnly,m=r.confirmDisabled,p=r.confirmButtonType,w=r.intl.formatMessage,v=(0,o.d4)(function(r){return r.login}).spinner,y=(0,t.useMemo)(function(){return["xs","sm"].includes(f)},[f]),_=(0,t.useMemo)(function(){return y?{fullWidth:!0}:{}},[y]);return(0,u.jsx)(l.A,{open:i,maxWidth:f||"sm",handleClose:c,title:n,message:a,footer:(0,u.jsxs)(u.Fragment,{children:[!g&&(0,u.jsx)(d.A,(0,e.A)((0,e.A)({buttonType:"reset",onClick:c,disabled:v},_),{},{children:w({id:"button.cancel"})})),(0,u.jsx)(d.A,(0,e.A)((0,e.A)({buttonType:p||"primary",onClick:function(){return!m&&s()},loadingButton:!0,loading:v,disabled:m},_),{},{children:w({id:g||"button.confirm"})}))]})})}))},70742:function(r,i,n){var e=n(89379),t=n(80045),a=n(9950),o=n(54408),l=n(83325),d=n(44414),u=["text"];i.A=(0,a.memo)((0,o.Ay)(function(r){var i=r.handleSubmit,n=r.rejectAction,a=r.spinner,o=r.intl.formatMessage;return function(){var r=[{text:"button.cancel",buttonType:"reset",onClick:n,disabled:a},{text:"button.save",buttonType:"primary",onClick:i,loading:a,loadingButton:!0}];return null===r||void 0===r?void 0:r.flatMap(function(r,i){var n=r.text,a=(0,t.A)(r,u);return null!==a&&void 0!==a&&a.onClick?(0,d.jsx)(l.A,(0,e.A)((0,e.A)({},a),{},{children:o({id:n})}),"".concat(n,"_").concat(i)):[]})}()}))},85546:function(r,i,n){n.d(i,{w:function(){return e}});var e=function(r,i,n){return{required:"".concat(r({id:"required.field.1"})," ").concat(i.toLowerCase()," ").concat(r({id:"required.field.2"}),"."),filter:"".concat(r({id:"filter.choose.1"})," ").concat(i.toLowerCase()," ").concat(r({id:"filter.choose.2"})),date:"".concat(r({id:"required.field.1"})," ").concat(i.toLowerCase()," ").concat(r({id:"required.field.2"}),"."),password:"".concat(r({id:"required.field.1"})," ").concat(i.toLowerCase()," ").concat(r({id:"password.minimum.characters"})),length:"".concat(r({id:"required.upload.field"}))}[n]}}}]);